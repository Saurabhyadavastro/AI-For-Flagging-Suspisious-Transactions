# üîç AI For Flagging Suspicious Transactions

A comprehensive AI-powered system for detecting anomalous patterns in transactions, built with Streamlit and modern ML techniques.

## üåü Features

- **Real-time Anomaly Detection**: Advanced algorithms to identify suspicious transaction patterns
- **Interactive Dashboard**: Professional Streamlit-based GUI with dark theme
- **File Upload Support**: CSV and Excel file processing capabilities
- **AI-Powered Analysis**: Intelligent chat system for transaction insights
- **Multi-factor Risk Assessment**: Comprehensive scoring based on amount, location, and timing
- **Interactive Visualizations**: Charts, graphs, and geographic mapping
- **Export Capabilities**: Generate reports and export analysis results

## ÔøΩ System Workflow

```mermaid
flowchart TD
    A[üìä Transaction Data Input] --> B{Data Source Type}
    B -->|CSV/Excel Upload| C[üìÅ File Processing]
    B -->|Manual Entry| D[‚úèÔ∏è Form Input]
    B -->|API Integration| E[üîå Real-time Data]
    
    C --> F[üßπ Data Validation & Cleaning]
    D --> F
    E --> F
    
    F --> G[üîç Feature Engineering]
    G --> H[üìà Statistical Analysis]
    
    H --> I{Anomaly Detection Engine}
    I --> J[ü§ñ ML Algorithm Analysis]
    I --> K[üìä Rule-based Scoring]
    I --> L[üß† AI Pattern Recognition]
    
    J --> M[üéØ Risk Score Calculation]
    K --> M
    L --> M
    
    M --> N{Risk Assessment}
    N -->|High Risk| O[üö® Suspicious Flag]
    N -->|Medium Risk| P[‚ö†Ô∏è Review Required]
    N -->|Low Risk| Q[‚úÖ Normal Transaction]
    
    O --> R[üìã Detailed Analysis Report]
    P --> R
    Q --> S[üìä Summary Statistics]
    
    R --> T[üé® Interactive Visualization]
    S --> T
    
    T --> U[üí¨ AI Chat Analysis]
    U --> V[üì§ Export Results]
    
    V --> W[üìß Alert Notifications]
    V --> X[üìÅ Report Generation]
    V --> Y[üìä Dashboard Updates]
    
    style A fill:#e1f5fe
    style O fill:#ffebee
    style P fill:#fff3e0
    style Q fill:#e8f5e8
    style U fill:#f3e5f5
    style V fill:#e0f2f1
```

## ÔøΩüöÄ Live Demo

üåê **Production URL**: [https://your-app-name.onrender.com](https://your-app-name.onrender.com)

## üìã Table of Contents

- [Features](#-features)
- [Installation](#-installation)
- [Local Development](#-local-development)
- [Deployment](#-deployment)
- [CI/CD Pipeline](#-cicd-pipeline)
- [Configuration](#-configuration)
- [Usage](#-usage)
- [API Documentation](#-api-documentation)
- [Contributing](#-contributing)
- [License](#-license)

## üõ† Installation

### Prerequisites

- Python 3.9+ (Python 3.11 recommended)
- Git
- Virtual environment tool (venv, conda, etc.)

### Local Setup

1. **Clone the repository**:
   ```bash
   git clone https://github.com/yourusername/AI-For-Flagging-Suspicious-Transactions.git
   cd AI-For-Flagging-Suspicious-Transactions
   ```

2. **Create and activate virtual environment**:
   ```bash
   # Using venv
   python -m venv .venv
   
   # Windows
   .venv\Scripts\activate
   
   # macOS/Linux
   source .venv/bin/activate
   ```

3. **Install dependencies**:
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

4. **Set up environment variables**:
   ```bash
   cp .env.example .env
   # Edit .env file with your configuration
   ```

5. **Run the application**:
   ```bash
   streamlit run main_gui_enhanced.py
   ```

6. **Access the application**:
   Open your browser to `http://localhost:8501`

## üîß Local Development

### Project Structure

```
AI-For-Flagging-Suspicious-Transactions/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml                 # CI/CD pipeline configuration
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ backend/                   # Backend logic and ML models
‚îÇ   ‚îú‚îÄ‚îÄ frontend/                  # UI components and integrations
‚îÇ   ‚îú‚îÄ‚îÄ database/                  # Database management
‚îÇ   ‚îú‚îÄ‚îÄ utils/                     # Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ data/                      # Data processing modules
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ app_config.yaml           # Application configuration
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ sample_transactions.csv   # Sample transaction data
‚îú‚îÄ‚îÄ main_gui_enhanced.py          # Main application entry point
‚îú‚îÄ‚îÄ requirements.txt              # Python dependencies
‚îú‚îÄ‚îÄ Dockerfile                    # Docker configuration
‚îú‚îÄ‚îÄ render.yaml                   # Render deployment configuration
‚îú‚îÄ‚îÄ .env.example                  # Environment variables template
‚îî‚îÄ‚îÄ README.md                     # This file
```

### üèóÔ∏è Technical Architecture

```mermaid
graph TB
    subgraph "Frontend Layer"
        A[üé® Streamlit UI]
        B[üìä Plotly Visualizations]
        C[üí¨ AI Chat Interface]
    end
    
    subgraph "Application Layer"
        D[üöÄ Main GUI Enhanced]
        E[üîß Configuration Manager]
        F[üìÅ File Upload Handler]
    end
    
    subgraph "Processing Engine"
        G[üßπ Data Preprocessor]
        H[üîç Feature Engineer]
        I[ü§ñ ML Anomaly Detector]
        J[üìä Statistical Analyzer]
    end
    
    subgraph "AI Integration"
        K[üß† Ollama Chat Integration]
        L[üéØ Risk Scoring Engine]
        M[üìà Pattern Recognition]
    end
    
    subgraph "Data Layer"
        N[(üìä Transaction Database)]
        O[üìÅ CSV/Excel Files]
        P[üîÑ Sample Data]
    end
    
    subgraph "External Services"
        Q[üåê Ollama API]
        R[‚òÅÔ∏è Render Deployment]
        S[üîê Environment Config]
    end
    
    A --> D
    B --> D
    C --> D
    
    D --> E
    D --> F
    
    F --> G
    G --> H
    H --> I
    H --> J
    
    I --> L
    J --> L
    K --> L
    
    K --> Q
    L --> M
    
    G --> N
    G --> O
    G --> P
    
    D --> R
    E --> S
    
    style A fill:#e3f2fd
    style K fill:#f3e5f5
    style I fill:#e8f5e8
    style L fill:#fff3e0
    style N fill:#fce4ec
    style R fill:#e0f2f1
```

### Development Commands

```bash
# Run application in development mode
streamlit run main_gui_enhanced.py --server.port 8501

# Run tests
pytest tests/ -v

# Code formatting
black .
isort .

# Linting
flake8 .
pylint src/

# Security scan
bandit -r src/
safety check
```

## üîÑ CI/CD Pipeline

```mermaid
gitGraph
    commit id: "Initial Commit"
    branch feature
    checkout feature
    commit id: "Add Feature"
    commit id: "Fix Tests"
    checkout main
    merge feature
    commit id: "Deploy v1.0"
    
    branch hotfix
    checkout hotfix
    commit id: "Security Fix"
    checkout main
    merge hotfix
    commit id: "Deploy v1.1"
```

```mermaid
flowchart LR
    A[üë®‚Äçüíª Developer Push] --> B[üì° GitHub Repository]
    B --> C{üîç GitHub Actions}
    
    C --> D[üßπ Code Quality Check]
    C --> E[üß™ Run Tests]
    C --> F[üîí Security Scan]
    
    D --> G{All Checks Pass?}
    E --> G
    F --> G
    
    G -->|‚úÖ Yes| H[üöÄ Deploy to Render]
    G -->|‚ùå No| I[üìß Notify Developer]
    
    H --> J[üåê Live Application]
    I --> K[üîß Fix Issues]
    K --> A
    
    J --> L[üìä Health Monitoring]
    L --> M[üìà Performance Metrics]
    
    style A fill:#e3f2fd
    style G fill:#fff3e0
    style H fill:#e8f5e8
    style I fill:#ffebee
    style J fill:#e0f2f1
```

## üåê Deployment

### Deploy to Render (Recommended)

Render provides free hosting for web applications with automatic deployments from GitHub.

#### Step 1: Prepare Your Repository

1. **Push your code to GitHub**:
   ```bash
   git add .
   git commit -m "Prepare for deployment"
   git push origin main
   ```

#### Step 2: Set Up Render Service

1. **Create Render Account**:
   - Go to [render.com](https://render.com)
   - Sign up with your GitHub account

2. **Create New Web Service**:
   - Click "New +" ‚Üí "Web Service"
   - Connect your GitHub repository
   - Select your suspicious transactions flagging repository

3. **Configure Deployment Settings**:
   ```
   Name: anomaly-detector
   Environment: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: streamlit run main_gui_enhanced.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true
   ```

4. **Set Environment Variables**:
   ```
   STREAMLIT_SERVER_HEADLESS=true
   STREAMLIT_SERVER_PORT=$PORT
   STREAMLIT_SERVER_ADDRESS=0.0.0.0
   STREAMLIT_THEME_BASE=dark
   STREAMLIT_BROWSER_GATHER_USAGE_STATS=false
   ```

#### Step 3: Configure GitHub Secrets for CI/CD

1. **Get Render Deploy Hook**:
   - In Render dashboard, go to your service
   - Navigate to "Settings" ‚Üí "Deploy Hook"
   - Copy the deploy hook URL

2. **Add GitHub Secret**:
   - Go to your GitHub repository
   - Click "Settings" ‚Üí "Secrets and variables" ‚Üí "Actions"
   - Click "New repository secret"
   - Name: `RENDER_DEPLOY_HOOK`
   - Value: Your Render deploy hook URL

#### Step 4: Configure Automatic Deployments

1. **Enable Auto-Deploy**:
   - In Render, go to "Settings" ‚Üí "Auto-Deploy"
   - Enable "Auto-Deploy" for the main branch

2. **Verify Deployment**:
   - Push changes to main branch
   - Watch the deployment in Render dashboard
   - Access your live application at the provided URL

### Alternative Deployment Options

#### Docker Deployment

1. **Build Docker Image**:
   ```bash
   docker build -t anomaly-detector .
   ```

2. **Run Container**:
   ```bash
   docker run -p 8501:8501 anomaly-detector
   ```

#### Heroku Deployment

1. **Install Heroku CLI**
2. **Create Heroku App**:
   ```bash
   heroku create your-app-name
   ```
3. **Deploy**:
   ```bash
   git push heroku main
   ```

## üîÑ CI/CD Pipeline

Our GitHub Actions pipeline includes:

### Pipeline Stages

1. **Code Quality & Linting**:
   - Black code formatting check
   - isort import sorting
   - flake8 style checking
   - pylint code analysis
   - bandit security scanning
   - safety dependency checking

2. **Build & Test**:
   - Multi-Python version testing (3.9, 3.10, 3.11)
   - Unit tests with pytest
   - Code coverage reporting
   - Application startup testing

3. **Security Scanning**:
   - Comprehensive security analysis
   - Dependency vulnerability checking
   - Security report generation

4. **Docker Build**:
   - Container image building
   - Container testing

5. **Deployment**:
   - Automatic deployment to Render
   - Post-deployment health checks
   - Integration testing

6. **Notification**:
   - Deployment status reporting
   - Pipeline summary

### Triggering Deployments

- **Automatic**: Push to `main` branch triggers deployment
- **Manual**: Use GitHub Actions "Run workflow" button
- **Pull Requests**: Run tests but skip deployment

## ‚öôÔ∏è Configuration

### Environment Variables

Create a `.env` file based on `.env.example`:

```env
# Application Configuration
APP_NAME="AI For Flagging Suspicious Transactions"
APP_VERSION="1.0.0"
ENVIRONMENT="development"
LOG_LEVEL="INFO"

# Streamlit Configuration
STREAMLIT_SERVER_HEADLESS=false
STREAMLIT_SERVER_PORT=8501
STREAMLIT_THEME_BASE="dark"

# Database Configuration (if using)
DATABASE_URL="your_database_url"
SUPABASE_URL="your_supabase_url"
SUPABASE_KEY="your_supabase_key"

# AI/ML Configuration
OLLAMA_HOST="localhost"
OLLAMA_PORT="11434"

# Security
SECRET_KEY="your_secret_key"
```

### Application Configuration

Edit `config/app_config.yaml`:

```yaml
app:
  name: "AI For Flagging Suspicious Transactions"
  version: "1.0.0"
  debug: false

anomaly_detection:
  threshold_high: 1000000  # 10 lakh INR
  threshold_medium: 500000  # 5 lakh INR
  risk_score_high: 0.9
  risk_score_medium: 0.6
  risk_score_low: 0.2

ui:
  theme: "dark"
  page_title: "AI For Flagging Suspicious Transactions"
  page_icon: "üîç"
```

## üìñ Usage

### üì± User Interaction Flow

```mermaid
sequenceDiagram
    participant U as üë§ User
    participant UI as üé® Streamlit UI
    participant BE as ‚öôÔ∏è Backend Engine
    participant AI as ü§ñ AI System
    participant DB as üíæ Data Store
    
    U->>UI: Upload transaction file
    UI->>BE: Process file data
    BE->>DB: Store transaction data
    
    BE->>BE: Validate & clean data
    BE->>BE: Feature engineering
    
    BE->>AI: Run anomaly detection
    AI->>AI: ML analysis + risk scoring
    AI->>BE: Return risk scores
    
    BE->>UI: Analysis results
    UI->>U: Display visualizations
    
    U->>UI: Request AI insights
    UI->>AI: Chat query
    AI->>AI: Generate analysis
    AI->>UI: AI response
    UI->>U: Show insights
    
    U->>UI: Export results
    UI->>BE: Generate report
    BE->>U: Download report
```

### File Upload

1. **Supported Formats**: CSV, Excel (.xlsx, .xls)
2. **Required Columns**:
   - `Transaction_ID`: Unique identifier
   - `Transaction_Amount`: Amount in INR
   - `Transaction_Type`: Type of transaction
   - `Location`: Transaction location
   - `Timestamp`: Transaction timestamp

### Sample Data Format

```csv
Transaction_ID,Transaction_Amount,Transaction_Type,Location,Timestamp
TXN001,1500000,Transfer,Mumbai,2025-09-01 10:30:00
TXN002,50000,Purchase,Delhi,2025-09-01 11:15:00
TXN003,2000000,Withdrawal,Bangalore,2025-09-01 12:00:00
```

### Risk Assessment

- **High Risk** (Score: 0.9): Transactions > ‚Çπ10 lakh
- **Medium Risk** (Score: 0.6): Transactions > ‚Çπ5 lakh
- **Low Risk** (Score: 0.2): Transactions < ‚Çπ5 lakh

## üîß API Documentation

### Health Check Endpoint

```
GET /_stcore/health
```

Returns application health status.

### File Upload API

The application provides a web interface for file uploads. Programmatic access can be implemented using Streamlit's session state.

## ü§ù Contributing

1. **Fork the repository**
2. **Create feature branch**: `git checkout -b feature/amazing-feature`
3. **Commit changes**: `git commit -m 'Add amazing feature'`
4. **Push to branch**: `git push origin feature/amazing-feature`
5. **Open Pull Request**

### Development Guidelines

- Follow PEP 8 style guidelines
- Write comprehensive tests
- Update documentation
- Ensure security best practices

## üîí Security

- All dependencies are regularly scanned for vulnerabilities
- Input validation on all file uploads
- Secure environment variable handling
- Regular security audits with bandit and safety

## üìù License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üìû Support

- **Issues**: [GitHub Issues](https://github.com/yourusername/AI-For-Flagging-Suspicious-Transactions/issues)
- **Discussions**: [GitHub Discussions](https://github.com/yourusername/AI-For-Flagging-Suspicious-Transactions/discussions)
- **Email**: your-email@example.com

## üéØ Roadmap

- [ ] Enhanced ML models for anomaly detection
- [ ] Real-time data streaming support
- [ ] Advanced user authentication
- [ ] Multi-currency support
- [ ] Mobile application
- [ ] Advanced analytics dashboard
- [ ] Integration with banking APIs

## üèÜ Acknowledgments

- Streamlit team for the amazing framework
- Render for free hosting
- GitHub Actions for CI/CD
- Open source community for various libraries

---

**Made with ‚ù§Ô∏è for financial security and transaction monitoring**
